* Tanuki
** Next
*** DONE Fix the failing tests on chihiro, some numbers need flexible matches
*** DONE On asset update, remove old duplicate tags, ignoring case, saving new values
*** TODO Prefix the checksum with the algorithm (e.g. sha256-*) [10/10]
- [X] rename the =sha256= document field to =checksum= in =migrate.js=
- [X] prepend algo in =incoming.computeChecksum()=
- [X] error check in =resolvers.lookup()=
- [X] rename =sha256= variables and comments to just =checksum=
- [X] increment schema version to 8
- [X] add algo prefix to checksum in =migrate.js=
- [X] get the tests to pass
- [X] check the Elm code
- [X] manually test web ui
- [X] manually test GraphiQL

** General Items
*** TODO Support wildcards in filename, mimetype (others?)
*** TODO Need a query to find image assets whose orientation is incorrect/unknown
*** TODO Asset preview page shows a broken link, should show placeholder image
*** TODO Add a "people" field
- Need an admin screen to move a tag from "tags" to "people"
*** TODO Design the user login and comments system (see "families")
*** TODO Look for means of ensuring LevelDB data integrity
- Look into enabling extra LevelDB checks (`paranoidChecks`, `verifyChecksums`)
*** TODO Use PouchDB/CouchDB replication to keep a local backup
- Perform backup after N operations, or every T minutes
- Recovery is to replace corrupted DB with backup
- Could just be something that is manually invoked as needed
*** TODO Support HEIC/HEIF file formats
*** TODO When performing image manipulations, invoke `sharp.withMetadata()` to preserve metadata
*** TODO Support an "album" for the assets
- Would be on details/edit page for benefit of uploading
- Expose on main page as a selector
- Assets can belong to multiple albums
- Eventually support "smart" albums based on asset attributes
*** TODO Add REST API to perform database compaction
*** TODO Extract ID3 tags on incoming audio files
*** TODO Use a webview to preview Markdown generated as HTML

*** TODO Detect time zone offset in EXIF data

According to Wikipedia the 2.31 version of EXIF will support time-zone
information. Eventually, the application should be able to detect this and
include it in the database records.

: There is no way to record time-zone information along with the time, thus
: rendering the stored time ambiguous. However, time-zone information have
: been introduced recently by Exif version 2.31 (July 2016). Related tags are:
: "OffsetTime", "OffsetTimeOriginal" and "OffsetTimeDigitized".

*** TODO Allow *any* or *all* when selecting assets by tag

By default, when selecting multiple tags, only those assets with all of the
tags are shown. It would be good to allow switching that to "any", so the
union of all such assets is presented. Note that this could be a lot of
assets. This may also make sense for years and locations.

*** TODO Consider testing Elm interface with =elm-test=

- See [[https://github.com/elm-community/elm-test][elm-community/elm-test]] for more information.
- Would need to have backend running and populated with sample data.

** Documentation

*** Case Sensitivity
- Data is stored as entered (case preservative)
- Attribute lists are all lowercased
- Search is always case insensitive

*** Date/Time values
- Uses 24 hour clock, displays using local time zone, stored as UTC
- [[http://www.unicode.org/reports/tr35/tr35-43/tr35-dates.html#Date_Format_Patterns][Date_Format_Patterns]]
