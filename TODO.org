* TODO

** Node.js Rewrite

- [DONE] Create a basic express.js application and get it running
- [DONE] Build a basic web interface with a simple Elm page (POC)
  - [DONE] Set up EJS template engine
  - [DONE] Learn express.js routing, set up / to an EJS view
  - [DONE] Copy the static assets from the old web app
  - [DONE] Set up mocha.js and chai for testing
  - [DONE] Use https://github.com/patrick-steele-idem/app-module-path-node
  - [DONE] Put dummy API controller in place, with tests
  - [DONE] Put web middleware on the "pages" router rather than the app
  - [DONE] Set up gulp build pipeline
  - [DONE] Ensure Elm code gets watched and automatically compiled
  - [DONE] Ensure the bootstrap CSS, fonts, and icons are working
  - [DONE] Remove everything referring to "phoenix"
- [DONE] Set up basic backend with PouchDB
  - [DONE] create the "tanuki" database in an appropriate location
  - [DONE] install design documents (e.g. by_tags)
- [DONE] Change all of the console output to winston logging statements
- [TODO] Looks like put() is better than post() for PouchDB
  - use original sha256 for the document id
  - no need for the by_checksum view
- [TODO] Port backend code from Elixir to JavaScript
  - [TODO] Backend code should probably surface the errors rather than just logging
  - [TODO] https://www.npmjs.com/package/mime
  - [TODO] https://github.com/sindresorhus/passwd-user
  - [TODO] https://github.com/lovell/sharp
  - [TODO] https://github.com/mattiasw/ExifReader
  - [TODO] https://github.com/fluent-ffmpeg/node-fluent-ffmpeg
  - [TODO] Use [catbox](https://github.com/hapijs/catbox) for thumbnail caching
- [DONE] Invoke `query()` with a `limit` of zero to populate the index after creating it
- [TODO] Port incoming code from Elixir to JavaScript
- [TODO] add `image/heic` and `image/heif` to custom mimetypes
- [TODO] Implement the "import" route for the upload page to use
- [TODO] Use https://github.com/pillarjs/send for file streaming and partial responses
- [TODO] Ensure the Elm interface is working
- [TODO] Elm interface should not show the >> expander when there are not enough attributes
- [TODO] Figure out how to use layouts with EJS and express.js
  - apparently EJS uses partials instead of a layout
  - Sails.js somehow manages to have real layouts with EJS
- [TODO] Set the `production` flag in `gulpfile.js` based on environment
- [TODO] How to handle errors in the backend? Using console.error() for now
- [TODO] Configure morgan based on our configuration file
  - dev/test: write to stdout
  - production: write to a file
  - see https://github.com/expressjs/morgan for an example of setting the "stream"
- [TODO] Look at https://moment.github.io/luxon/docs/ for a nice date/time library

** General Items

- [TODO] migrate the old data over to the new document format
  - the sha256 value becomes the document _id
- [TODO] Need to read `apiUrlPrefix` in Elm code from configuration file
  - currently it is modified at deployment time using `sed`
- [TODO] Support HEIC/HEIF file formats
- [TODO] Add a "people" field
  - How to set this in import?
  - Need an admin screen to move a tag from "tags" to "people"
  - Maybe a generic "move" action:
    + Given a list of tags to be moved...
    + And the name of a field (e.g. "people")...
    + Move the given tags to the named field
- [TODO] Instead of a "topic" field, perhaps an "occasion" field instead.
  - For instance, "christina birthday".
  - Add back to incoming processor using the "^" separator.
  - Would be on details/edit page for benefit of uploading.
  - Maybe don't bother exposing on main page, just another field like caption.
- [TODO] api to perform database compaction
- [TODO] Decide what process manager to use; possibly launchd on macOS
  - http://expressjs.com/en/advanced/pm.html
- [TODO] Review express.js performance guidelines
  - http://expressjs.com/en/advanced/best-practice-performance.html

** Migration

- [TODO] Consider extracting more information from videos and images into database
  - Like the sorts of attributes that Photos uses to make smart albums

** Custom queries

- [TODO] Once a user has removed a custom query, invoke PouchDB's `db.viewCleanup()` to clean them up
  - Otherwise you get stale query results
